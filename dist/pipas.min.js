var pipas=new function(){var a=this,b={prepareUrls:function(a){return a||console.error("url is not defined. Expected string or array"),"string"==typeof a?[b.appendBasePath(a)]:($.each(a,function(c,d){a[c]=b.appendBasePath(d)}),a)},appendBasePath:function(b){var c=b.replace(/^\/|\/$/g,"");return b==c?a.basePath()+"/"+c:b},hasExtension:function(a,b){var c=a.indexOf("?");return c>=0&&(a=a.substring(0,c)),a.substring(a.length-b.length)==b},history:{},uniqueStyles:[],basePath:"",locale:null};this.basePath=function(a){return void 0!=a&&(b.basePath=a),b.basePath},this.get=function(a,c,d){var e,f=[],g=[];$.each(b.prepareUrls(a),function(a,c){if(b.history.hasOwnProperty(c))f.push(b.history[c]),b.history[c].readyState&&g.push(b.history[c]);else if(b.hasExtension(c,"js"))e=$.getScript(c),f.push(e),g.push(e),b.history[c]=e;else if(b.hasExtension(c,"css")){var d=$.Deferred();$(document.createElement("link")).attr({href:c,type:"text/css",rel:"stylesheet"}).appendTo("head").on("load",function(){d.resolve("and")}),f.push(d),b.history[c]=d}else e=$.get(c),f.push(e),g.push(e),b.history[c]=e}),$.when.apply($,f).done(function(){c.apply(d,g)})},this.getUniqueStyle=function(a){var c=document.getElementsByTagName("head")[0];for(var d in b.uniqueStyles)c.removeChild(b.uniqueStyles[d]);b.uniqueStyles=[],$.each(b.prepareUrls(a),function(a,d){style=document.createElement("link"),style.rel="stylesheet",style.type="text/css",style.href=d,style.media="all",b.uniqueStyles[d]=style,c.appendChild(style)})},this.locale=function(a){return void 0!=a&&(b.locale=a),b.locale||navigator.language||navigator.userLanguage}};!function(a,b){b.overlay=new function(){var b={defaultElement:a("<div>"),parents:[],getSelector:function(a){return a&&"body"!=a?"#"+a:"body"},getOverlay:function(c){var d=this.getSelector(c),e=a(d),f=e.find("> .pipas-overlay");return f.length||(f=b.defaultElement.clone().addClass("pipas-overlay"),e.append(f)),"body"!=e.selector&&f.css("zIndex",998),f},setReserved:function(b,c){var d=a.map(c,function(a){return[a]});b.attr("data-pipas-reserved",d.join(" "))}};this.show=function(a,c){var d=b.getOverlay(c),e=b.parents[c]||{idList:{},elm:d};return e.idList[a]=a,b.parents[c]=e,d.show(),b.setReserved(d,e.idList),d},this.hide=function(a){for(var c in b.parents)if(b.parents.hasOwnProperty(c)&&b.parents[c].idList[a]){delete b.parents[c].idList[a],0==Object.keys(b.parents[c].idList).length?(b.parents[c].elm&&b.parents[c].elm.remove(),delete b.parents[c]):b.setReserved(b.parents[c].elm,b.parents[c].idList);break}},this.cancel=function(a){b.parents[a]&&(b.parents[a].elm.remove(),delete b.parents[a])},this.defaultElement=function(c){return void 0==c?b.defaultElement:(b.defaultElement="string"==typeof c?a(c):c,this)}}}(jQuery,pipas),function(a,b,c){pipas.message=new function(){var d={getContainer:function(b){return a(b?"#"+b:"body")},getElement:function(b){var c=b.find("> .pipas-message");return c.length||(c=a('<div class="modal pipas-message" role="dialog"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Notifications</h4></div><div class="modal-body"></div></div></div></div>'),b.append(c)),c},supported:["info","success","danger","warning"]};this.showError=function(a,b){this.show(a,"danger",b)},this.showInfo=function(a,b){this.show(a,"info",b)},this.showSuccess=function(a,b){this.show(a,"success",b)},this.showWarning=function(a,b){this.show(a,"warning",b)},this.show=function(e,f,g){"error"===f?f="danger":d.supported.indexOf(f)<0&&(f="info");var h=d.getContainer(g),i=d.getElement(h),j=i.find(".modal-body");c.show("message",g),0==j.find("> ."+f+"s").length&&j.append(a("<div class='message-group "+f+"s'></div>"));var k="danger"==f?"Error":f.charAt(0).toUpperCase()+f.slice(1),l=j.find("> ."+f+"s .alert span").filter(function(){return a(this).text()==e});l.length>0?l.each(function(){var b=a(this).parent(),c=b.find("span.badge");c.length>0?c.text(parseInt(c.text())+1):b.find("strong").after(' <span class="badge">2</span> ')}):j.find("> ."+f+"s").append(a("<div class='alert alert-"+f+"'><strong>"+k+"!</strong> <span>"+e+"</span></div>"));var m=a(b).height();j.height()>m&&j.height(m-150),i.is(":visible")||i.fadeIn();var n=this,o=function(){n.hide(g)};return a(".pipas-message").off("click",o).on("click",o),a(document).on("keydown",function(b){13==b.keyCode&&a(".pipas-message button").trigger("click")}),i},this.hide=function(a){var b=d.getContainer(a),e=d.getElement(b);c.hide("message",a),e.remove()}}}(jQuery,window,pipas.overlay),function(a,b){b.overlay||console.error("Overlay must be declared before spinner",b),b.spinner=new function(){var c={defaultElement:a('<svg class="pipas-spinner-svg" viewBox="0 -256 1792 1792"><defs id="defs3033"/><g transform="matrix(1,0,0,-1,121.49153,1315.7966)" id="g3027"><path d="M 496,192 Q 496,132 453.5,90 411,48 352,48 q -60,0 -102,42 -42,42 -42,102 0,60 42,102 42,42 102,42 59,0 101.5,-42 Q 496,252 496,192 z M 928,0 Q 928,-53 890.5,-90.5 853,-128 800,-128 747,-128 709.5,-90.5 672,-53 672,0 672,53 709.5,90.5 747,128 800,128 853,128 890.5,90.5 928,53 928,0 z M 320,640 Q 320,574 273,527 226,480 160,480 94,480 47,527 0,574 0,640 q 0,66 47,113 47,47 113,47 66,0 113,-47 47,-47 47,-113 z M 1360,192 q 0,-46 -33,-79 -33,-33 -79,-33 -46,0 -79,33 -33,33 -33,79 0,46 33,79 33,33 79,33 46,0 79,-33 33,-33 33,-79 z M 528,1088 Q 528,1015 476.5,963.5 425,912 352,912 279,912 227.5,963.5 176,1015 176,1088 q 0,73 51.5,124.5 51.5,51.5 124.5,51.5 73,0 124.5,-51.5 Q 528,1161 528,1088 z m 464,192 q 0,-80 -56,-136 -56,-56 -136,-56 -80,0 -136,56 -56,56 -56,136 0,80 56,136 56,56 136,56 80,0 136,-56 56,-56 56,-136 z m 544,-640 q 0,-40 -28,-68 -28,-28 -68,-28 -40,0 -68,28 -28,28 -28,68 0,40 28,68 28,28 68,28 40,0 68,-28 28,-28 28,-68 z m -208,448 q 0,-33 -23.5,-56.5 -23.5,-23.5 -56.5,-23.5 -33,0 -56.5,23.5 -23.5,23.5 -23.5,56.5 0,33 23.5,56.5 23.5,23.5 56.5,23.5 33,0 56.5,-23.5 23.5,-23.5 23.5,-56.5 z" id="path3029" style="fill:currentColor"/> </g></svg>'),parents:{},getSelector:function(a){return a&&"body"!=a?"#"+a:"body"},createSpinner:function(b){var d=this.getSelector(b),e=a(d).css("position","relative"),f=e.find("> .pipas-spinner");return f.length||(f=a('<div class="pipas-spinner"></div>'),c.defaultElement.clone().appendTo(f),f.appendTo(e)),f},setReserved:function(b,c){var d=a.map(c,function(a){return[a]});b.attr("data-pipas-reserved",d.join(" "))}};this.show=function(a,d){d||(d="body");var e=c.createSpinner(d).show(),f=c.parents[d]||{idList:{},elm:e};f.idList[a]=a,c.parents[d]=f,b.overlay.show(a,d),"body"!=d&&e.css("zIndex",999),c.setReserved(e,f.idList)},this.hide=function(a){for(var d in c.parents)if(c.parents.hasOwnProperty(d)&&c.parents[d].idList[a]){delete c.parents[d].idList[a],0==Object.keys(c.parents[d].idList).length?(c.parents[d].elm&&c.parents[d].elm.remove(),delete c.parents[d]):c.setReserved(c.parents[d].elm,c.parents[d].idList);break}b.overlay.hide(a)},this.cancel=function(a){c.parents[a]&&(c.parents[a].elm.remove(),delete c.parents[a]),b.overlay.cancel(a)},this.defaultElement=function(b){return void 0==b?c.defaultElement:(c.defaultElement="string"==typeof b?a(b):b,this)}}}(jQuery,pipas),function(a,b){b.url={stateTypeName:"pipasAjax",creanedParameters:["_fid"],history:[],baseUrl:"/",clean:function(a){for(var b in this.creanedParameters)a=this.remove(a,this.creanedParameters[b]);return a},append:function(a,b,c){var d=this.separeParams(a);return d[b]=c,this.getPureUrl(a)+"?"+this.joinParams(d)},appendData:function(a,b){var c=this.separeParams(a),d=this.separeParams(decodeURI(b));for(var e in d)c[e]=d[e];return a=this.getPureUrl(a),0===Object.keys(c).length?a:a+"?"+this.joinParams(c)},search:function(a,b){if("string"==typeof a&&"string"==typeof b){var c=this.separeParams(a);for(var d in c)if(d===b)return c[d]}return null},remove:function(a,b){if("string"==typeof a&&"string"==typeof b){var c=this.separeParams(a);for(var d in c)d===b&&delete c[d];if(0===Object.keys(c).length)return this.getPureUrl(a);a=this.getPureUrl(a)+"?"+this.joinParams(c)}return a},changeTo:function(b){b=b?this.clean(b):"/";var c=this.history.pop();if(c!==b&&this.history.push(c),this.history.push(b),a&&a.pushState){if(a.state&&a.state.url&&a.state.url===b)return;a.pushState({type:this.stateTypeName,url:b},null,b)}else console.error("an not write URL")},searchFromData:function(a,b){if(a=decodeURI(a),"string"==typeof a&&"string"==typeof b){var c,d=a.split("&");for(i in d)if(c=d[i].split("="),c[0]===b)return c[1]}return!1},getPureUrl:function(a){if("string"==typeof a){var b=a.split("?");return b[0]}return""},separeParams:function(a){var b=[];if("string"==typeof a){var c,d=a.split("?"),e=d[d.length-1],f=e.split("&"),g=0;for(var h in f)""!==f[h]&&(c=f[h].split("="),c[1]&&(-1!==c[0].indexOf("[]")&&(c[0]=c[0].substring(0,c[0].length-2)+"["+g+"]",g++),b[c[0]]=c[1]))}return b},joinParams:function(a){var b="";if(Array.isArray(a))for(var c in a)""!==b&&(b+="&"),b+=c+"="+a[c];return b},getCurrent:function(){return document.location.href}},a.state||a.replaceState({type:b.url.stateTypeName},null,document.location)}(history,pipas),function(a){a.utils={clone:function(a){return a?JSON.parse(JSON.stringify(a)):a}}}(pipas);